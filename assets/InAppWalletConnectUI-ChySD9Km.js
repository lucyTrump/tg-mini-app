import{cq as k,aT as n,aV as h,bb as L,bd as A,aZ as j,cr as W,bc as S,cs as B,ct as C,cu as z,aS as w,b9 as y,cv as I,cw as b,bf as U,cx as v,bS as T,cy as P,cz as F}from"./index-DAt5dF0_.js";import{E as H,L as O,O as D,P as E,S as M}from"./SocialLogin-Uiy6FvCp.js";import{C as R,u as V}from"./useInAppWalletLocale-CznzjFdk.js";import q from"./AllWalletsUI-BuEZM8SS.js";import"./index-CxRUj4Yy.js";import"./passkeys-DDWa5edk.js";import"./oauth-BY4uKVCQ.js";function K(e){var d,s,i,g,u,m,x,c,f;const o=e.size==="compact",{initialScreen:r,screen:l}=k(),t=l===e.wallet&&r===e.wallet,a=t&&!e.isLinking?void 0:e.goBack;return n.jsxs(h,{fullHeight:!0,flex:"column",p:"lg",animate:"fadein",style:{minHeight:"250px"},children:[o&&(t?n.jsxs(n.Fragment,{children:[n.jsx(L,{onBack:a,leftAligned:!e.isLinking,title:n.jsxs(n.Fragment,{children:[(d=e.meta)!=null&&d.titleIconUrl?n.jsx(A,{src:(s=e.meta)==null?void 0:s.titleIconUrl,width:j.md,height:j.md,client:e.client}):null,n.jsx(W,{children:((i=e.meta)==null?void 0:i.title)??e.inAppWalletLocale.emailLoginScreen.title})]})}),n.jsx(S,{y:"lg"})]}):n.jsx(L,{onBack:a,title:e.inAppWalletLocale.signIn})),n.jsx(h,{expand:!0,flex:"column",center:"y",p:o?void 0:"lg",children:n.jsx(R,{...e,locale:e.inAppWalletLocale})}),o&&(((g=e.meta)==null?void 0:g.showThirdwebBranding)!==!1||((u=e.meta)==null?void 0:u.termsOfServiceUrl)||((m=e.meta)==null?void 0:m.privacyPolicyUrl))&&n.jsx(S,{y:"xl"}),n.jsxs(h,{flex:"column",gap:"lg",children:[n.jsx(B,{termsOfServiceUrl:(x=e.meta)==null?void 0:x.termsOfServiceUrl,privacyPolicyUrl:(c=e.meta)==null?void 0:c.privacyPolicyUrl,locale:e.connectLocale.agreement}),((f=e.meta)==null?void 0:f.showThirdwebBranding)!==!1&&n.jsx(C,{})]})]})}function Z(){return z("useAddConnectedWallet").handleConnection}function G(e){const{wallet:o,done:r}=e,l=Z(),t=w.useRef(),[a,d]=w.useState("selecting"),[s,i]=w.useState(),[g,u]=w.useState(!1),m=()=>{d("selecting"),t.current=void 0,e.onBack()};async function x(c){d("loading"),t.current=c;try{await v(o,{strategy:"wallet",wallet:c,chain:o.getChain()||T(1)}).catch(f=>{throw i(f.message),f}),l(c),r()}catch{d("error")}}return t.current?n.jsxs(h,{animate:"fadein",fullHeight:!0,flex:"column",children:[n.jsx(h,{p:"lg",children:n.jsx(L,{title:e.inAppLocale.linkWallet,onBack:m})}),n.jsx(h,{px:e.size==="wide"?"xxl":"lg",expand:!0,flex:"column",center:"y",children:n.jsx("div",{children:a==="error"?n.jsxs(n.Fragment,{children:[n.jsx(H,{onTryAgain:()=>{if(!t.current)throw new Error("Failed to connect to unknown wallet");x(t.current)},title:s||"Failed to Login"}),n.jsx(S,{y:"lg"})]}):n.jsx(n.Fragment,{children:n.jsx(O,{title:"Sign in with your wallet",subtitle:"A pop-up prompt will appear to sign-in and verify your wallet",icon:n.jsx(U,{id:t.current.id??"",size:j.xl,client:e.client})})})})})]}):g?n.jsx(w.Suspense,{fallback:n.jsx(y,{}),children:n.jsx(q,{onBack:()=>u(!1),onSelect:async c=>{x(c),u(!1)},client:e.client,connectLocale:e.locale,recommendedWallets:void 0,specifiedWallets:[],size:e.size,disableSelectionDataReset:!0})}):n.jsx(I,{title:e.locale.connectAWallet,wallets:b(),selectWallet:async c=>{x(c)},onShowAll:()=>{u(!0)},done:()=>{},goBack:m,setModalVisibility:()=>{},client:e.client,connectLocale:e.locale,hideHeader:!1,recommendedWallets:void 0,chain:o.getChain(),showAllWallets:!0,chains:[],size:e.size,meta:e.meta||{},walletConnect:e.walletConnect,modalHeader:{title:e.inAppLocale.linkWallet,onBack:m},walletIdsToHide:["inApp"],disableSelectionDataReset:!0})}function p(e){const o=P(),r=F(),l=o,t=e.connectLocale.id,a=V(t),{initialScreen:d}=k();if(!a)return n.jsx(y,{});const s=d===e.wallet?()=>{r({})}:e.goBack,i=()=>{e.done(),r({})},g=l!=null&&l.emailLogin?{email:l.emailLogin}:l!=null&&l.phoneLogin?{phone:l.phoneLogin}:void 0;return g?n.jsx(D,{userInfo:g,locale:a,done:i,goBack:s,wallet:e.wallet,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.passkeyLogin?n.jsx(E,{locale:e.connectLocale,wallet:e.wallet,done:i,onBack:s,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.walletLogin?n.jsx(G,{meta:e.meta,inAppLocale:a,walletConnect:e.walletConnect,wallet:e.wallet,client:e.client,size:e.size,done:i,onBack:s||(()=>r({})),locale:e.connectLocale}):l!=null&&l.socialLogin?n.jsx(M,{socialAuth:l.socialLogin.type,locale:a,done:i,goBack:s,wallet:e.wallet,state:l,chain:e.chain,client:e.client,size:e.size,connectLocale:e.connectLocale,isLinking:e.isLinking}):n.jsx(K,{select:()=>{},connectLocale:e.connectLocale,inAppWalletLocale:a,done:i,goBack:e.goBack,wallet:e.wallet,client:e.client,meta:e.meta,size:e.size,chain:e.chain,isLinking:e.isLinking})}export{p as default};
